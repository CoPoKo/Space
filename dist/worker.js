!function(e){var n={};function t(r){if(n[r])return n[r].exports;var s=n[r]={i:r,l:!1,exports:{}};return e[r].call(s.exports,s,s.exports,t),s.l=!0,s.exports}t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:r})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var s in e)t.d(r,s,function(n){return e[n]}.bind(null,s));return r},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="",t(t.s=18)}([function(e,n,t){"use strict";t.r(n),t.d(n,"dash_nav",(function(){return r}));const r=["home","search","setting"]},function(e,n){e.exports='<!DOCTYPE html>\r\n<html lang="en" class="no-js">\r\n\r\n<head>\r\n  <meta charset="UTF-8" />\r\n  <meta robots="noindex, nofollow" />\r\n  <meta http-equiv="x-dns-prefetch-control" content="on" />\r\n  <link rel="dns-prefetch" href="::PRECONNECT::" />\r\n  <link rel="preconnect" href="::PRECONNECT::" crossorigin />\r\n  <meta name="renderer" content="webkit" />\r\n  <meta name="force-rendering" content="webkit" />\r\n  <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1" />\r\n  <meta name="HandheldFriendly" content="True" />\r\n  <meta name="apple-mobile-web-app-capable" content="yes" />\r\n  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />\r\n  <meta content="no-transform" http-equiv="Cache-Control" />\r\n  <meta content="no-siteapp" http-equiv="Cache-Control" />\r\n  <title>Error</title>\r\n  <link rel="icon" type="image/png" sizes="16x16" href="::CDN::/favicon/favicon-16x16.png" />\r\n  <link rel="icon" type="image/png" sizes="32x32" href="::CDN::/favicon/favicon-32x32.png" />\r\n  <link rel="icon" type="image/png" sizes="96x96" href="::CDN::/favicon/favicon-96x96.png" />\r\n  <link rel="stylesheet" type="text/css" href="::CDN::/css/error.css" />\r\n</head>\r\n\r\n<body>\r\n  <div class="container">\r\n    <div class="content">\r\n      <div id="large-header" class="large-header">\r\n        <div id="parallax-window"></div>\r\n        <canvas id="header-canvas"></canvas>\r\n      </div>\r\n      <div class="codrops-header">\r\n        <h1>Error<span>::ErrorInfo::</span></h1>\r\n      </div>\r\n    </div>\r\n    <div>\r\n      <svg class="waves" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"\r\n        viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto">\r\n        <defs>\r\n          <path id="gentle-wave" d="M-160 44c30 0 58-18 88-18s 58 18 88 18 58-18 88-18 58 18 88 18 v44h-352z" />\r\n        </defs>\r\n        <g class="parallax">\r\n          <use xlink:href="#gentle-wave" x="48" y="0" fill="rgba(135,206,235,0.7)" />\r\n          <use xlink:href="#gentle-wave" x="48" y="3" fill="rgba(135,206,235,0.5)" />\r\n          <use xlink:href="#gentle-wave" x="48" y="5" fill="rgba(135,206,235,0.3)" />\r\n          <use xlink:href="#gentle-wave" x="48" y="7" fill="rgba(135,206,235,1)" />\r\n        </g>\r\n      </svg>\r\n    </div>\r\n  </div>\r\n  <script src="::CDN::/js/error.js"><\/script>\r\n</body>\r\n\r\n</html>'},function(e,n){e.exports='<!DOCTYPE html>\r\n<html lang="zh">\r\n\r\n<head>\r\n  <meta charset="UTF-8" />\r\n  <meta robots="noindex, nofollow" />\r\n  <meta http-equiv="x-dns-prefetch-control" content="on" />\r\n  <link rel="dns-prefetch" href="::PRECONNECT::" />\r\n  <link rel="preconnect" href="::PRECONNECT::" crossorigin />\r\n  <meta name="renderer" content="webkit" />\r\n  <meta name="force-rendering" content="webkit" />\r\n  <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1" />\r\n  <meta name="HandheldFriendly" content="True" />\r\n  <meta name="apple-mobile-web-app-capable" content="yes" />\r\n  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />\r\n  <title>Auth | CoPoKo Space</title>\r\n  <link rel="icon" type="image/png" sizes="16x16" href="::CDN::/favicon/favicon-16x16.png" />\r\n  <link rel="icon" type="image/png" sizes="32x32" href="::CDN::/favicon/favicon-32x32.png" />\r\n  <link rel="icon" type="image/png" sizes="96x96" href="::CDN::/favicon/favicon-96x96.png" />\r\n  <link rel="stylesheet" href="::CDN::/css/auth.css" />\r\n  <style>\r\n    .grecaptcha-badge {\r\n      display: none;\r\n    }\r\n  </style>\r\n</head>\r\n\r\n<body>\r\n  <main class="auth-main wrapper">\r\n    <div id="auth-block" class="auth-block">\r\n      <h1>Welcome</h1>\r\n      <div id="form" class="form-horizontal" method="POST" action="/space/auth">\r\n        <div class="form-group">\r\n          <label for="inputName" class="col-sm-2 control-label">Name</label>\r\n          <div class="col-sm-10">\r\n            <input type="text" name="name" class="form-control" id="inputName" placeholder="Name" required="required"\r\n              autocomplete="off" />\r\n          </div>\r\n        </div>\r\n        <div class="form-group">\r\n          <label for="inputPassword" class="col-sm-2 control-label">Password</label>\r\n          <div class="col-sm-10">\r\n            <input type="password" name="password" class="form-control" id="inputPassword" placeholder="Password"\r\n              required="required" autocomplete="off" />\r\n          </div>\r\n        </div>\r\n        <div class="form-group">\r\n          <div class="col-sm-offset-5 col-sm-10">\r\n            <button type="submit" id="signin" class="btn btn-default btn-auth">\r\n              Sign in\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <ul class="bg-bubbles">\r\n      <li></li>\r\n      <li></li>\r\n      <li></li>\r\n      <li></li>\r\n      <li></li>\r\n      <li></li>\r\n      <li></li>\r\n      <li></li>\r\n      <li></li>\r\n      <li></li>\r\n    </ul>\r\n  </main>\r\n  <script src="https://recaptcha.net/recaptcha/api.js?render=::reCAPTCHA_CLIENT::"><\/script>\r\n  <script>\r\n    document.getElementById("signin").addEventListener("click", async () => {\r\n      const name = document.getElementById("inputName").value;\r\n      const password = document.getElementById("inputPassword").value;\r\n      document.getElementById("auth-block").innerHTML =\r\n        "<h1>我们正在进行人机验证...</h1>";\r\n      grecaptcha.ready(() => {\r\n        grecaptcha\r\n          .execute("::reCAPTCHA_CLIENT::", { action: "space" })\r\n          .then(async (t) => {\r\n            document.getElementById("auth-block").innerHTML =\r\n              "<h1>我们正在验证您的登录凭据...</h1>";\r\n            const res = await (\r\n              await fetch(\r\n                new Request("/space/auth", {\r\n                  method: "POST",\r\n                  headers: {\r\n                    "Content-Type": "application/x-www-form-urlencoded",\r\n                  },\r\n                  body: `name=${name}&password=${password}&token=${t}`,\r\n                })\r\n              )\r\n            ).json();\r\n            if (res.success) {\r\n              document.getElementById("auth-block").innerHTML =\r\n                "<h1>登录成功，即将跳转！</h1>";\r\n              document.cookie = res.cookie;\r\n              document.location.href = `${document.location.origin}/space/dash`;\r\n            } else {\r\n              document.getElementById("auth-block").innerHTML =\r\n                "<h1>无效的登录凭据 :(</h1>";\r\n            }\r\n          });\r\n      });\r\n    });\r\n  <\/script>\r\n</body>\r\n\r\n</html>'},function(e,n){e.exports="User-agent: * \r\nDisallow: /"},function(e,n){e.exports='<!DOCTYPE html>\n<html lang="en">\n<head>\n  <meta charset="utf-8">\n  <meta robots="noindex, nofollow" />\n  <meta name="viewport" content="width=device-width, initial-scale=1">\n  <title>CoPoKo Space</title>\n\n  \x3c!-- Google Font: Source Sans Pro --\x3e\n  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,400i,700&display=fallback">\n  \x3c!-- Font Awesome Icons --\x3e\n  <link rel="stylesheet" href="https://fastly.jsdelivr.net/npm/@fortawesome/fontawesome-free@6/css/all.min.css">\n  \x3c!-- overlayScrollbars --\x3e\n  <link rel="stylesheet" href="https://fastly.jsdelivr.net/npm/overlayscrollbars@1.13.1/css/OverlayScrollbars.min.css">\n  \x3c!-- Theme style --\x3e\n  <link rel="stylesheet" href="https://fastly.jsdelivr.net/npm/admin-lte@3.1.0/dist/css/adminlte.min.css">\n  <style>\n    .brand-text{\n      text-align: center !important;\n      display: block !important;\n    }\n  </style>\n</head>\n<body class="hold-transition dark-mode sidebar-mini layout-fixed layout-navbar-fixed layout-footer-fixed">\n<div class="wrapper">\n\n  \x3c!-- Navbar --\x3e\n  <nav class="main-header navbar navbar-expand navbar-dark">\n    \x3c!-- Left navbar links --\x3e\n    <ul class="navbar-nav">\n      <li class="nav-item">\n        <a class="nav-link" data-widget="pushmenu" href="#" role="button"><i class="fas fa-bars"></i></a>\n      </li>\n    </ul>\n\n    \x3c!-- Right navbar links --\x3e\n    <ul class="navbar-nav ml-auto">\n\n    </ul>\n  </nav>\n  \x3c!-- /.navbar --\x3e\n\n  \x3c!-- Main Sidebar Container --\x3e\n  <aside class="main-sidebar sidebar-dark-primary elevation-4">\n    \x3c!-- Brand Logo --\x3e\n    <a href="/space/dash" class="brand-link">\n      <span class="brand-text font-weight-light">CoPoKo Space</span>\n    </a>\n\n    \x3c!-- Sidebar --\x3e\n    <div class="sidebar">\n\n      \x3c!-- Sidebar Menu --\x3e\n      <nav class="mt-2">\n        <ul class="nav nav-pills nav-sidebar flex-column" data-widget="treeview" role="menu" data-accordion="false">\n          ::DASH_NAV::\n        </ul>\n      </nav>\n      \x3c!-- /.sidebar-menu --\x3e\n\n  \n    </div>\n    \x3c!-- /.sidebar --\x3e\n  </aside>\n\n  \x3c!-- Content Wrapper. Contains page content --\x3e\n  <div class="content-wrapper">\n    \x3c!-- Main content --\x3e\n    ::DASH_CONTENT::\n    \x3c!-- /.content --\x3e\n  </div>\n  \x3c!-- /.content-wrapper --\x3e\n\n</div>\n\x3c!-- ./wrapper --\x3e\n\n\x3c!-- REQUIRED SCRIPTS --\x3e\n\x3c!-- jQuery --\x3e\n<script src="https://fastly.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js"><\/script>\n\x3c!-- Bootstrap --\x3e\n<script src="https://fastly.jsdelivr.net/npm/bootstrap@5.1.0/dist/js/bootstrap.bundle.min.js"><\/script>\n\x3c!-- overlayScrollbars --\x3e\n<script src="https://fastly.jsdelivr.net/npm/overlayscrollbars@1.13.1/js/jquery.overlayScrollbars.min.js"><\/script>\n\x3c!-- AdminLTE App --\x3e\n<script src="https://fastly.jsdelivr.net/npm/admin-lte@3.1.0/dist/js/adminlte.min.js"><\/script>\n\n</body>\n</html>\n'},function(e,n,t){"use strict";t.r(n),t.d(n,"space_static_version",(function(){return r})),t.d(n,"space_cdn",(function(){return s})),t.d(n,"space_dns_prefetch",(function(){return a}));const r="1.0.1653038935402",s="https://fastly.jsdelivr.net/npm",a="https://fastly.jsdelivr.net"},function(e,n,t){var r={"./home/nav-item.html":7,"./search/nav-item.html":8,"./setting/nav-item.html":9};function s(e){var n=a(e);return t(n)}function a(e){if(!t.o(r,e)){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}return r[e]}s.keys=function(){return Object.keys(r)},s.resolve=a,e.exports=s,s.id=6},function(e,n){e.exports=""},function(e,n){e.exports='<li class="nav-item">\r\n  <a href="/space/dash/search" class="nav-link">\r\n    <i class="nav-icon fas fa-search"></i>\r\n    <p>\r\n      Search\r\n    </p>\r\n  </a>\r\n</li>'},function(e,n){e.exports='<li class="nav-item">\r\n  <a href="/space/dash/setting" class="nav-link">\r\n    <i class="nav-icon fas fa-gear"></i>\r\n    <p>\r\n      Setting\r\n    </p>\r\n  </a>\r\n</li>'},function(e,n,t){var r={"./home/content.html":11,"./search/content.html":12,"./setting/content.html":13};function s(e){var n=a(e);return t(n)}function a(e){if(!t.o(r,e)){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}return r[e]}s.keys=function(){return Object.keys(r)},s.resolve=a,e.exports=s,s.id=10},function(e,n){e.exports='<div class="container-fluid">\r\n  <h2 class="text-center display-4">Home</h2>\r\n</div>'},function(e,n){e.exports='\x3c!-- Content Header (Page header) --\x3e\r\n<section class="content-header">\r\n  <div class="container-fluid">\r\n    <h2 class="text-center display-4">Search</h2>\r\n  </div>\r\n</section>\r\n\r\n\x3c!-- Main content --\x3e\r\n<section class="content">\r\n  <div class="container-fluid">\r\n    <div class="row">\r\n      <div class="col-md-8 offset-md-2">\r\n        <form action="simple-results.html">\r\n          <div class="input-group input-group-lg">\r\n            <input type="search" class="form-control form-control-lg" placeholder="Type your keywords here">\r\n            <div class="input-group-append">\r\n              <button type="submit" class="btn btn-lg btn-default">\r\n                <i class="fa fa-search"></i>\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n    <div class="row mt-3">\r\n      <div class="col-md-10 offset-md-1">\r\n        <div class="list-group">\r\n\r\n          <div class="list-group-item">\r\n            <div class="row">\r\n              <div class="col px-4">\r\n                <div>\r\n                  <h3>Lorem ipsum dolor sit amet</h3>\r\n                  <p class="mb-0">consectetuer adipiscing elit. Aenean commodo ligula eget dolor. Aenean massa. Cum\r\n                    sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus.</p>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n        </div>\r\n      </div>\r\n    </div>\r\n</section>'},function(e,n){e.exports='\x3c!-- Content Header (Page header) --\x3e\r\n<section class="content-header">\r\n  <div class="container-fluid">\r\n    <h2 class="text-center display-4">Setting</h2>\r\n  </div>\r\n</section>\r\n\r\n\x3c!-- Main content --\x3e\r\n<section class="content">\r\n  <div class="card collapsed-card">\r\n    <div class="card-header">\r\n      <h3 class="card-title">Project</h3>\r\n      <div class="card-tools">\r\n        <button type="button" class="btn btn-tool" data-card-widget="collapse" title="Collapse">\r\n          <i class="fas fa-plus"></i>\r\n        </button>\r\n        <button type="button" class="btn btn-tool" data-card-widget="remove" title="Remove">\r\n          <i class="fas fa-times"></i>\r\n        </button>\r\n      </div>\r\n    </div>\r\n    <div class="card-body p-0" style="display: none;">\r\n      <table class="table table-striped projects">\r\n        <thead>\r\n          <tr>\r\n            <th>Key</th>\r\n            <th>Value</th>\r\n            <th style="width: 20%"></th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          <tr>\r\n            <td>\r\n              <p>Key1</p>\r\n            </td>\r\n            <td>\r\n              <p>Value1</p>\r\n            </td>\r\n            <td class="project-actions text-right">\r\n              <a class="btn btn-info btn-sm" href="#">\r\n                <i class="fas fa-pencil-alt"> </i>\r\n                Edit\r\n              </a>\r\n              <a class="btn btn-danger btn-sm" href="#">\r\n                <i class="fas fa-trash"> </i>\r\n                Delete\r\n              </a>\r\n            </td>\r\n          </tr>\r\n        </tbody>\r\n      </table>\r\n      <button type="button" class="btn btn-block btn-primary btn-lg">Add KV</button>\r\n    </div>\r\n    \x3c!-- /.card-body --\x3e\r\n  </div>\r\n  <button type="button" class="btn btn-block btn-primary btn-lg">Add Project</button>\r\n</section>\r\n\r\n<script>\r\n  fetch("/space/api/kv/get",{\r\n    method:"POST",\r\n    headers: {\r\n      "content-type": "application/json",\r\n      "User-Agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/83.0.4103.61 Safari/537.36",\r\n    },\r\n    body: JSON.stringify({\r\n      "key": "key",\r\n    })\r\n  }).then(function(response){\r\n    return response.json();\r\n  }).then(function(data){\r\n    console.log(data);\r\n  });\r\n<\/script>'},function(e,n,t){var r;e.exports=(r=t(15),function(e){var n=r,t=n.lib,s=t.WordArray,a=t.Hasher,i=n.algo,o=[],c=[];!function(){function n(n){for(var t=e.sqrt(n),r=2;r<=t;r++)if(!(n%r))return!1;return!0}function t(e){return 4294967296*(e-(0|e))|0}for(var r=2,s=0;s<64;)n(r)&&(s<8&&(o[s]=t(e.pow(r,.5))),c[s]=t(e.pow(r,1/3)),s++),r++}();var l=[],d=i.SHA256=a.extend({_doReset:function(){this._hash=new s.init(o.slice(0))},_doProcessBlock:function(e,n){for(var t=this._hash.words,r=t[0],s=t[1],a=t[2],i=t[3],o=t[4],d=t[5],h=t[6],p=t[7],u=0;u<64;u++){if(u<16)l[u]=0|e[n+u];else{var f=l[u-15],m=(f<<25|f>>>7)^(f<<14|f>>>18)^f>>>3,v=l[u-2],y=(v<<15|v>>>17)^(v<<13|v>>>19)^v>>>10;l[u]=m+l[u-7]+y+l[u-16]}var g=r&s^r&a^s&a,w=(r<<30|r>>>2)^(r<<19|r>>>13)^(r<<10|r>>>22),b=p+((o<<26|o>>>6)^(o<<21|o>>>11)^(o<<7|o>>>25))+(o&d^~o&h)+c[u]+l[u];p=h,h=d,d=o,o=i+b|0,i=a,a=s,s=r,r=b+(w+g)|0}t[0]=t[0]+r|0,t[1]=t[1]+s|0,t[2]=t[2]+a|0,t[3]=t[3]+i|0,t[4]=t[4]+o|0,t[5]=t[5]+d|0,t[6]=t[6]+h|0,t[7]=t[7]+p|0},_doFinalize:function(){var n=this._data,t=n.words,r=8*this._nDataBytes,s=8*n.sigBytes;return t[s>>>5]|=128<<24-s%32,t[14+(s+64>>>9<<4)]=e.floor(r/4294967296),t[15+(s+64>>>9<<4)]=r,n.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=a.clone.call(this);return e._hash=this._hash.clone(),e}});n.SHA256=a._createHelper(d),n.HmacSHA256=a._createHmacHelper(d)}(Math),r.SHA256)},function(e,n,t){(function(n){var r;e.exports=(r=r||function(e,r){var s;if("undefined"!=typeof window&&window.crypto&&(s=window.crypto),"undefined"!=typeof self&&self.crypto&&(s=self.crypto),"undefined"!=typeof globalThis&&globalThis.crypto&&(s=globalThis.crypto),!s&&"undefined"!=typeof window&&window.msCrypto&&(s=window.msCrypto),!s&&void 0!==n&&n.crypto&&(s=n.crypto),!s)try{s=t(17)}catch(e){}var a=function(){if(s){if("function"==typeof s.getRandomValues)try{return s.getRandomValues(new Uint32Array(1))[0]}catch(e){}if("function"==typeof s.randomBytes)try{return s.randomBytes(4).readInt32LE()}catch(e){}}throw new Error("Native crypto module could not be used to get secure random number.")},i=Object.create||function(){function e(){}return function(n){var t;return e.prototype=n,t=new e,e.prototype=null,t}}(),o={},c=o.lib={},l=c.Base={extend:function(e){var n=i(this);return e&&n.mixIn(e),n.hasOwnProperty("init")&&this.init!==n.init||(n.init=function(){n.$super.init.apply(this,arguments)}),n.init.prototype=n,n.$super=this,n},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var n in e)e.hasOwnProperty(n)&&(this[n]=e[n]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},d=c.WordArray=l.extend({init:function(e,n){e=this.words=e||[],this.sigBytes=null!=n?n:4*e.length},toString:function(e){return(e||p).stringify(this)},concat:function(e){var n=this.words,t=e.words,r=this.sigBytes,s=e.sigBytes;if(this.clamp(),r%4)for(var a=0;a<s;a++){var i=t[a>>>2]>>>24-a%4*8&255;n[r+a>>>2]|=i<<24-(r+a)%4*8}else for(var o=0;o<s;o+=4)n[r+o>>>2]=t[o>>>2];return this.sigBytes+=s,this},clamp:function(){var n=this.words,t=this.sigBytes;n[t>>>2]&=4294967295<<32-t%4*8,n.length=e.ceil(t/4)},clone:function(){var e=l.clone.call(this);return e.words=this.words.slice(0),e},random:function(e){for(var n=[],t=0;t<e;t+=4)n.push(a());return new d.init(n,e)}}),h=o.enc={},p=h.Hex={stringify:function(e){for(var n=e.words,t=e.sigBytes,r=[],s=0;s<t;s++){var a=n[s>>>2]>>>24-s%4*8&255;r.push((a>>>4).toString(16)),r.push((15&a).toString(16))}return r.join("")},parse:function(e){for(var n=e.length,t=[],r=0;r<n;r+=2)t[r>>>3]|=parseInt(e.substr(r,2),16)<<24-r%8*4;return new d.init(t,n/2)}},u=h.Latin1={stringify:function(e){for(var n=e.words,t=e.sigBytes,r=[],s=0;s<t;s++){var a=n[s>>>2]>>>24-s%4*8&255;r.push(String.fromCharCode(a))}return r.join("")},parse:function(e){for(var n=e.length,t=[],r=0;r<n;r++)t[r>>>2]|=(255&e.charCodeAt(r))<<24-r%4*8;return new d.init(t,n)}},f=h.Utf8={stringify:function(e){try{return decodeURIComponent(escape(u.stringify(e)))}catch(e){throw new Error("Malformed UTF-8 data")}},parse:function(e){return u.parse(unescape(encodeURIComponent(e)))}},m=c.BufferedBlockAlgorithm=l.extend({reset:function(){this._data=new d.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=f.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(n){var t,r=this._data,s=r.words,a=r.sigBytes,i=this.blockSize,o=a/(4*i),c=(o=n?e.ceil(o):e.max((0|o)-this._minBufferSize,0))*i,l=e.min(4*c,a);if(c){for(var h=0;h<c;h+=i)this._doProcessBlock(s,h);t=s.splice(0,c),r.sigBytes-=l}return new d.init(t,l)},clone:function(){var e=l.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0}),v=(c.Hasher=m.extend({cfg:l.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){m.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(n,t){return new e.init(t).finalize(n)}},_createHmacHelper:function(e){return function(n,t){return new v.HMAC.init(e,t).finalize(n)}}}),o.algo={});return o}(Math),r)}).call(this,t(16))},function(e,n){var t;t=function(){return this}();try{t=t||new Function("return this")()}catch(e){"object"==typeof window&&(t=window)}e.exports=t},function(e,n){},function(e,n,t){"use strict";t.r(n);var r={js:{headers:{"content-type":"application/javascript; charset=utf-8","Access-Control-Allow-Origin":"*"}},html:{headers:{"content-type":"text/html; charset=utf-8","Access-Control-Allow-Origin":"*"}},json:{headers:{"content-type":"application/json; charset=utf-8","Access-Control-Allow-Origin":"*"}},stream:{headers:{"content-type":"application/octet-stream","Access-Control-Allow-Origin":"*"}},xml:{headers:{"content-type":"application/xml; charset=utf-8","Access-Control-Allow-Origin":"*"}},text:{headers:{"content-type":"text/plain; charset=utf-8","Access-Control-Allow-Origin":"*"}}};var s=async function(e){return new Response(E.renderers.erorr.replace(/::ErrorInfo::/g,e),E.helpers.headers.html)};var a={headers:r,ErrorResponse:s,Router:class{constructor(e){this.event=e,this.request=this.event.request,this.urlObj=new URL(this.request.url),this.pathname=this.urlObj.pathname,this.searchParams=this.urlObj.searchParams,this.method=this.request.method,this.ip=this.request.headers.get("CF-Connecting-IP")||this.request.headers.get("x-real-ip"),this.status={action:0,filterPath:0,auth:0,path:0},this.setStatus=(e,n)=>(this.status[e]=n,this),this.getParam=e=>this.searchParams.get(e),this.get=e=>(this.status.action||this.status.filterPath||"GET"==this.method&&this.pathname.startsWith(e)&&(this.status.filterPath=1,this.status.path=e),this),this.post=e=>(this.status.action||this.status.filterPath||"POST"==this.method&&this.pathname.startsWith(e)&&(this.status.filterPath=1,this.status.path=e),this),this.action=function(e){return this.status.action||this.status.filterPath&&(this.status.action=1,this.run=async()=>await e(this)),this}}},cookie:{set:async function(e,n,t,r="/"){return e.headers.append("Set-Cookie",`${n}=${t}; path=${r};Max-Age=86400`),e},get:async function(e,n){const t=e.headers.get("Cookie");if(!t)return"";const r=n+"=",s=t.indexOf(r);if(-1===s)return"";const a=t.substring(s+r.length,t.length),i=a.indexOf(";");return-1===i?a:a.substring(0,i)}},readRequest:{Body:async function(e){const{headers:n}=e,t=n.get("content-type")||"";if(t.includes("application/json"))return JSON.stringify(await e.json());if(t.includes("application/text"))return await e.text();if(t.includes("text/html"))return await e.text();if(t.includes("form")){const n=await e.formData(),t={};for(const e of n.entries())t[e[0]]=e[1];return JSON.stringify(t)}return await e.blob()}},captcha:{recaptcha:async(e,n,t)=>{let r=await fetch(new Request("https://www.google.com/recaptcha/api/siteverify",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:`secret=${e}&response=${n}&remoteip=${t}`}));return r=await r.json(),!!(r.success&&r.score>=.6)}},kv:{put:async(e,n)=>await SpaceKV.put(e,n),delete:async e=>await SpaceKV.delete(e),get:async e=>await SpaceKV.get(e)}},i=t(1),o=t.n(i),c=t(2),l=t.n(c),d=t(3),h=t.n(d),p=t(4),u=t.n(p);const{space_static_version:f,space_cdn:m,space_dns_prefetch:v}=t(5);function y(e){return e=(e=e.replace(/::CDN::/g,m+"/@copoko/space-static@"+f)).replace(/::PRECONNECT::/g,v)}const{dash_nav:g}=t(0);let w="";g.forEach(e=>{w+=t(6)(`./${e}/nav-item.html`)});let b={};g.forEach(e=>{b[e]=function(e){let n=u.a.replace(/::DASH_NAV::/g,w);return n=n.replace(/::DASH_CONTENT::/g,t(10)(`./${e}/content.html`)),n}(e)});var x={erorr:y(o.a),auth:y(l.a),robots:h.a,dash:b};let k=t(14);var S={CheckAuth:async function(e){let n=await E.helpers.readRequest.Body(e.request);n=JSON.parse(n);let t=n.token,r=reCAPTCHA_SERVER,s=e.ip;if(await E.helpers.captcha.recaptcha(r,t,s)){let e=`${k(SpaceName).toString()}::${k(SpacePassword).toString()}`,t=`${k(n.name).toString()}::${k(n.password).toString()}`;if(t==e)return new Response(JSON.stringify({success:1,cookie:"_copoko_space_cookie_auth="+t}),E.helpers.headers.json)}return new Response(JSON.stringify({success:0}),E.helpers.headers.json)},CheckCookieAuth:async function(e){return E.helpers.cookie.get(e.request,"_copoko_space_cookie_auth").then(async e=>{if(e){if(e==`${k(SpaceName).toString()}::${k(SpacePassword).toString()}`)return"PASS"}return await E.helpers.ErrorResponse("NO PERMISSION TO ACCESS THE SERVICE")})},AuthPage:async function(e){return new Response(E.renderers.auth.replace(/::reCAPTCHA_CLIENT::/g,reCAPTCHA_CLIENT),E.helpers.headers.html)}};var C=async function(e){return new Response(E.renderers.robots,E.helpers.headers.text)};function _(e){return new Response(E.renderers.dash[e.status.path.replace("/space/dash/","")],E.helpers.headers.html)}const{dash_nav:A}=t(0);let O={};A.forEach(e=>{O[e]=_});var E={helpers:a,renderers:x,actions:{Auth:S,Robots:C,Dash:O,api:{kv:{get:async function(e){try{let n=await E.helpers.readRequest.Body(e.request);n=JSON.parse(n);let t=n.key,r=await E.helpers.kv.get(t);return new Response(JSON.stringify({sucess:1,value:r}),E.helpers.headers.json)}catch(e){return new Response(JSON.stringify({sucess:0,error:e}),E.helpers.headers.json)}},put:async function(e){try{let n=await E.helpers.readRequest.Body(e.request);n=JSON.parse(n);let t=n.key,r=n.value;return await E.helpers.kv.put(t,r),new Response(JSON.stringify({sucess:1}),E.helpers.headers.json)}catch(e){return new Response(JSON.stringify({sucess:0,error:e}),E.helpers.headers.json)}},delete:async function(e){try{let n=await E.helpers.readRequest.Body(e.request);n=JSON.parse(n);let t=n.key;return await E.helpers.kv.delete(t),new Response(JSON.stringify({sucess:1}),E.helpers.headers.json)}catch(e){return new Response(JSON.stringify({sucess:0,error:e}),E.helpers.headers.json)}}}}}};var j=async function(e){try{let n=new E.helpers.Router(e);if(n.get("/robots.txt").action(E.actions.Robots),n.get("/"+START).action(E.actions.Auth.AuthPage),n.post("/space/auth").action(E.actions.Auth.CheckAuth),!n.status.action){let t=await E.actions.Auth.CheckCookieAuth(e);if("PASS"!=t)return t;n.setStatus("auth",1)}const{dash_nav:r}=t(0);return r.forEach(e=>{n.get("/space/dash/"+e).action(E.actions.Dash[e])}),n.post("/space/api/kv/get").action(E.actions.api.kv.get),n.post("/space/api/kv/put").action(E.actions.api.kv.put),n.post("/space/api/kv/delete").action(E.actions.api.kv.delete),n.status.action?await n.run():n.status.auth&&e.request.url!=`https://${e.request.url.split("/")[2]}/space/dash/home`?Response.redirect(`https://${e.request.url.split("/")[2]}/space/dash/home`,302):await E.helpers.ErrorResponse("Ooops...")}catch(e){return await E.helpers.ErrorResponse(e)}};addEventListener("fetch",e=>{e.respondWith(j(e).catch(e=>new Response(e.stack,{status:500})))})}]);